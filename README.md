# WorkWhale 摸鱼阅读器 🐋

一个伪装成 Microsoft Word 的在线小说阅读器，让你在工作时也能安心阅读。

## ✨ 特性

### 核心功能

- 📖 **支持常用格式**: TXT、EPUB（智能章节识别）
- ⌨️ **键入显露**: 通过键盘输入逐字显示内容，模拟真实的文档编辑
- 🔄 **一键切换**: 按 Enter 立即在阅读和工作文档之间切换
- ⚙️ **自定义热键**: 根据个人习惯自由配置所有快捷键
- 💾 **断点续读**: 多重自动保存（按键/定时/退出前），进度永不丢失
- 🔍 **智能进度**: 重新导入书籍自动恢复上次阅读位置
- 🔒 **本地处理**: 所有文件在本地解析，保护隐私
- 📚 **最近阅读**: 快速访问最近打开的书籍

### 界面伪装（v2.6.0 重大更新）

- 🎭 **完美还原Word界面**: 95%真实度，参照Microsoft Word 2016/2019
- 📐 **完整Ribbon工具栏**: 
  - 10个标签页（文件、开始、插入、设计、布局、引用、邮件、审阅、视图、帮助）
  - 剪贴板组（大粘贴按钮 + 垂直排列的剪切/复制/格式刷）
  - 字体组（13个按钮：字体选择、字号、B/I/U/S、上下标、颜色等）
  - 段落组（14个按钮：列表、缩进、对齐、行距、边框等）
  - 样式组（6种预设：正文、标题1/2、副标题等，带AaBbCcDd预览）
  - 编辑组（查找、替换、选择）
- 🎨 **真实的Word配色**: 蓝色文件标签、悬停效果、活动状态指示
- 🖼️ **五级按钮系统**: 超大/常规/小/图标/微小，完全符合Word规范
- 📱 **响应式设计**: 桌面/平板/移动端自适应布局
- 🎨 **自定义字体**: 真实可调节的字体和字号（8-72号）
- 📐 **Word级排版**: 精确的页边距、阴影、文本渲染

## 🎮 使用方法

### 基本操作

1. **导入书籍**: 拖拽或选择 TXT/EPUB 文件
2. **开始阅读**: 按任意字母键逐字显示内容
3. **快速浏览**: 按空格键快速显示多个字符
4. **切换伪装**: 按 Enter 键切换到工作文档模板
5. **快速切换**: 按 Enter 立即在阅读和伪装之间切换

### 快捷键（可自定义）

| 按键 | 功能 | 可自定义 |
|------|------|----------|
| 任意字母键 | 显示 1 个字符 | ❌ |
| `Space` | 快速显示 4 个字符 | ✅ |
| `Enter` | 切换阅读/伪装模式 | ✅ |
| `Backspace` | 回退已显示的内容 | ✅ |
| `Tab` | 快进 50 个字符 | ✅ |

**💡 提示**：点击⚙️图标（初始页右上角或阅读页Ribbon工具栏）可自定义所有快捷键！

### 自定义热键

**⚙️ 设置入口：**
- **初始页面**：右上角⚙️图标
- **阅读界面**：Ribbon工具栏 → 设置组 → 热键设置按钮

**🎯 可配置功能：**
- 🔄 切换伪装模式（默认：Enter）
- ↩️ 回退内容（默认：Backspace）
- ⚡ 快速显露（默认：Space）
- ⏩ 快进50字符（默认：Tab）

**📋 操作方法：**
1. 打开热键设置面板
2. 点击要修改的功能对应的按钮
3. 按下您想设置的新键
4. 点击"保存"使设置生效

**✨ 特性：**
- 实时冲突检测，防止热键重复
- 自动保存到本地，永久生效
- 支持一键恢复默认配置
- 提供使用建议和注意事项

📖 详见：[热键设置说明.md](./热键设置说明.md)

### 字体设置

**Ribbon工具栏提供：**
- 📝 **字体选择**：Calibri、Arial、Times New Roman、宋体、微软雅黑、黑体、楷体等10种字体
- 🔢 **字号选择**：8、9、10、11、12、14、16、18、20、22、24、26、28、36、48、72号
- ⬆️⬇️ **快捷按钮**：A↑ / A↓ 一键增大/减小字号
- ✨ **实时预览**：更改立即生效，支持阅读和伪装模式

### 断点续读

**💾 多重自动保存机制：**
- 🔢 **按键保存**：每按 50 次键自动保存一次进度
- ⏰ **定时保存**：每 30 秒自动保存一次进度
- 👋 **退出保存**：关闭页面/刷新前自动保存
- 🎯 **操作保存**：拖动进度条、点击目录时立即保存

**🔄 智能进度恢复：**
- 📚 从"最近阅读"列表打开：自动恢复到上次阅读位置
- 📖 重新导入同一本书：自动识别并恢复进度
- ✅ 进度永不丢失：多重保护机制确保安全

**📊 进度查看：**
- 状态栏实时显示：`已阅读 24.7% | 12,345 / 50,000 字`
- 底部进度条可拖动，支持快速跳转
- 点击 `-5%` / `+5%` 按钮快速翻页

📖 详见：[断点续读说明.md](./断点续读说明.md)

## 🚀 快速开始

### 支持格式

- ✅ **TXT** - 纯文本小说（推荐，最稳定）
  - 自动识别章节标题（第X章、Chapter N 等）
  - 支持多种章节格式
- ✅ **EPUB** - 电子书格式
  - 优先使用内置TOC目录
  - 支持嵌套章节结构
  - 📐 **专业排版**：中文段落自动缩进、标题间距、列表格式
  - 🎨 **美观显示**：两端对齐、优化行距、智能段落识别
  - TOC失败时自动提取章节
  - 📖 [EPUB排版说明](./EPUB排版改进说明.md) | [EPUB目录说明](./EPUB目录说明.md)
- ❌ **PDF** - 暂不支持

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

### 预览生产版本

```bash
npm run preview
```

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **状态管理**: Zustand
- **数据存储**: IndexedDB (idb)
- **文件解析**: epub.js (EPUB 文件)
- **SEO优化**: Meta标签, Schema.org, Sitemap
- **数据分析**: Google Analytics (GA4)
- **广告系统**: Google AdSense

## 📁 项目结构

```
src/
├── components/          # UI 组件
│   ├── WordShell/      # Word 外壳组件（标题栏、Ribbon、状态栏）
│   ├── ReaderView/     # 阅读视图
│   ├── DecoyView/      # 伪装视图
│   └── FileImport/     # 文件导入界面
├── core/               # 核心功能
│   ├── reveal-engine.ts  # 显露引擎
│   ├── parser.ts         # 文件解析器
│   └── storage.ts        # 数据存储
├── store/              # 状态管理
│   └── useAppStore.ts
├── data/               # 数据模板
│   └── decoy-templates.ts  # 伪装文本模板
├── types/              # TypeScript 类型定义
└── App.tsx            # 主应用组件
```

## 💡 核心原理

### 显露引擎 (Reveal Engine)

核心算法将小说内容初始隐藏，通过键盘事件逐字显露：

```typescript
class RevealEngine {
  reveal(n: number): string {
    // 显露 n 个字符
    const revealed = this.buffer.slice(this.idx, this.idx + n);
    this.idx += n;
    return revealed;
  }
  
  recall(n: number): void {
    // 回退 n 个字符
    this.idx = Math.max(0, this.idx - n);
  }
}
```

### 文件解析

- **TXT**: 使用 `FileReader` API 直接读取
- **PDF**: 使用 `PDF.js` 提取文本内容
- **EPUB**: 使用 `epub.js` 解析电子书结构

### 数据持久化

使用 IndexedDB 存储：
- 书籍元数据
- 阅读进度
- 用户设置
- 书籍内容

## 🎨 伪装模板

内置多种工作文档模板：
- 📝 日报
- 📊 周报
- 📄 PRD 文档
- 📋 会议纪要
- 🎯 OKR
- 💻 代码评审

## 🚀 SEO和商业化

### SEO优化特性

本项目已完成全面的SEO优化，确保在搜索引擎中获得良好排名：

#### ✅ 已实现

- **Meta标签完善**：title, description, keywords
- **社交媒体优化**：Open Graph (Facebook), Twitter Cards
- **结构化数据**：Schema.org WebApplication
- **技术SEO**：
  - `robots.txt` - 爬虫规则配置
  - `sitemap.xml` - 站点地图
  - `manifest.json` - PWA支持
  - Canonical URL - 避免重复内容
  
- **性能优化**：
  - Preconnect关键资源
  - DNS Prefetch预解析
  - 异步加载第三方脚本

#### 🎯 SEO关键词

- 主关键词：摸鱼阅读器、在线小说阅读器、EPUB阅读器
- 长尾词：伪装阅读器、Word阅读器、工作摸鱼神器

### Google AdSense集成

支持通过Google AdSense获取广告收入：

#### 📋 快速配置

1. **申请AdSense账号**：访问 [Google AdSense](https://www.google.com/adsense/)
2. **获取发布商ID**：格式 `ca-pub-1234567890123456`
3. **替换代码**：
   ```html
   <!-- index.html 第82行 -->
   <script async src="...?client=ca-pub-您的ID"></script>
   ```
4. **创建广告位**：在AdSense后台创建广告单元
5. **添加广告组件**：
   ```tsx
   import { AdSense } from '@/components/AdSense/AdSense';
   <AdSense adSlot="您的广告单元ID" adFormat="auto" />
   ```

#### 💰 收益预期

基于流量估算（仅供参考）：
- 100 PV/天：$5-15/月
- 1000 PV/天：$50-150/月
- 10000 PV/天：$500-1500/月

*实际收益取决于：流量质量、用户地域、广告点击率等因素*

### Google Analytics集成

全面的用户行为分析：

1. **创建GA4属性**：获取衡量ID（`G-XXXXXXXXXX`）
2. **替换代码**：
   ```html
   <!-- index.html 第86和91行 -->
   gtag('config', 'G-您的ID');
   ```
3. **事件追踪**：
   ```typescript
   trackEvent('file_import', { file_type: 'epub' });
   trackEvent('book_read', { reading_progress: 0.5 });
   ```

### 详细配置指南

📖 查看完整教程：[SEO和广告配置指南.md](./SEO和广告配置指南.md)

内容包括：
- Google AdSense详细配置流程
- Google Analytics设置指南
- Google Search Console验证
- 社交媒体优化技巧
- 内容优化建议
- 收益优化策略

## ⚠️ 使用提醒

- 本工具仅供娱乐和学习使用
- 请遵守公司规章制度，合理安排工作和休息时间
- 建议在休息时间或非工作场景使用
- 所有文件均在本地处理，不会上传到服务器

## 📧 联系方式

- Email: wanghongxiang23@gmail.com
- X (Twitter): @Rollkey4

## 📄 开源协议

MIT License

---

**免责声明**: 本项目仅供学习和娱乐，请勿在工作时间过度使用。合理安排工作与休息，保持工作效率。

